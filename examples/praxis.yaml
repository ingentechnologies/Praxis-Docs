{"openapi":"3.0.0","info":{"title":"Pria API","version":"1.0.0","description":"Pria Runtime API Documentation"},"servers":[{"url":"https://pria.praxislxp.com","description":"Pria Runtime API Server"}],"paths":{"/api/test/db":{"get":{"summary":"Check database connection status","description":"Returns the current database connection status with explanatory message","responses":{"200":{"description":"Database connection status retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseStatusResponse"},"example":{"message":"0: disconnected, 1: connected, 2: connecting, 3: disconnecting, 4: invalid credentials","status":1}}}}},"tags":["Testing"]}},"/api/test/health":{"get":{"summary":"Health check endpoint to verify service status","description":"Returns the current health status of the service including uptime, memory usage, and dependency status","responses":{"200":{"description":"Service is healthy and operational","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"},"example":{"status":"ok","uptime":112.368138,"timestamp":1750534150795,"memory":{"rss":128008192,"heapTotal":72105984,"heapUsed":67442352,"external":23693540,"arrayBuffers":19882176},"dependencies":{"database":1}}}}}},"tags":["Testing"]}},"/api/test/url":{"post":{"summary":"Test a URL and retrieve associated information","description":"Tests a provided URL and returns LTI assignment status, generated identifiers, and other metadata","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestUrlRequest"}}}},"responses":{"200":{"description":"URL test completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestUrlResponse"}}}},"400":{"description":"Bad request - invalid URL format"},"500":{"description":"Internal server error"}},"tags":["Testing"]}},"/api/auth/signin":{"post":{"summary":"User authentication and sign-in","description":"Authenticates a user with email and password, returns JWT token and user profile","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequest"}}}},"responses":{"200":{"description":"Successful authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponse"}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"}}}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"}}}}}}}}},"/api/auth/autosignup":{"post":{"summary":"Automatic user signup and authentication","description":"Creates or authenticates a user account automatically based on LXP integration data","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoSignupRequest"}}}},"responses":{"200":{"description":"Successful authentication with user profile and token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoSignupResponse"}}}},"400":{"description":"Bad request - invalid input data"},"401":{"description":"Unauthorized - invalid or missing authentication token"},"500":{"description":"Internal server error"}},"tags":["Authentication"]}},"/api/ai/personal/qanda":{"post":{"summary":"Process personal Q&A requests with AI assistant","description":"Handles conversational AI interactions with context awareness including user location, timezone, and course selection","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QandARequest"},"example":{"id":1750660464754,"requestArgs":{"userISODate":"2025-06-23T06:34:24.754Z","userTimezone":"Indian/Mauritius","userGPSCoordinates":{"accuracy":21126.837004634195,"latitude":-21.282816,"longitude":55.4139648,"altitude":null,"altitudeAccuracy":null,"heading":null,"speed":null},"socketId":"DhXE7OVjCtfUmDFTAAAB","selectedCourse":{"course_id":1750532703472,"course_name":"SwaggerAnnotation Generator Saturday, Jun 21, 2025","assistant":{"_id":"6856fa89cbafcff8d98680f5","name":"SwaggerAnnotation Generator","picture_url":""},"history_count":21,"last_dialogue_date":"2025-06-23T06:34:12.779Z"},"ragOnly":false},"inputs":["hi"],"outputs":[]}}}},"responses":{"200":{"description":"Successful AI response with conversation data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QandAResponse"},"example":{"success":true,"streamingFailed":true,"outputs":["Hello! ðŸ‘‹ I'm the SwaggerAnnotation Generator assistant..."],"usage":20287,"credits":1244,"creditsUsed":7083,"totalLength":20287,"totalCredits":3,"query_duration_ms":11088,"model":"us.anthropic.claude-sonnet-4-20250514-v1:0"}}}},"400":{"description":"Bad Request - Invalid request format or missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid request format"}}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized access"}}}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Internal server error"}}}}}}},"tags":["AI Personal Assistant"]}},"/api/user/refresh/profile":{"post":{"summary":"Refresh user profile data","description":"Retrieves and refreshes the current user's profile information","tags":["User Commands"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Profile refreshed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshProfileResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing access token"},"500":{"description":"Internal server error"}}}},"/api/user/refresh/entitlements":{"post":{"summary":"Refresh user entitlements and permissions","description":"Retrieves and refreshes the current user's entitlements across all institutions and accounts they have access to","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Successfully refreshed user entitlements","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshEntitlementsResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing access token","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"message":{"type":"string","example":"Unauthorized access"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"message":{"type":"string","example":"Internal server error"}}}}}}},"tags":["User Commands"]}},"/api/user/histories":{"post":{"summary":"Retrieve user conversation histories","description":"Fetches conversation history records based on specified filters and criteria","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryQuery"},"example":{"api":"/ai/personal/qanda","forgotten":{"$ne":true},"limit":5,"course_id":1750532703472}}}},"responses":{"200":{"description":"Successfully retrieved conversation histories","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoriesResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing access token"},"500":{"description":"Internal server error"}},"tags":["User Commands"]}},"/api/user/favorites":{"post":{"summary":"Retrieve user's favorite conversations","description":"Returns a list of conversations marked as favorites by the authenticated user","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Empty object for POST request"}}}},"responses":{"200":{"description":"Successfully retrieved favorite conversations","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FavoritesResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"tags":["User Commands"]}},"/api/user/courses":{"post":{"summary":"Retrieve user courses","description":"Gets a list of all courses associated with the authenticated user","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Empty object for this endpoint"}}}},"responses":{"200":{"description":"Successfully retrieved user courses","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Course"}}}}},"401":{"description":"Unauthorized - Invalid or missing access token"},"500":{"description":"Internal server error"}},"tags":["User Commands"]}},"/api/user/uploads":{"post":{"summary":"Search and retrieve user uploaded files","description":"Retrieves a list of user uploads with optional filtering by filename and status","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadSearchRequest"},"example":{"lean":true,"status":{"$ne":"deleted"},"fileNameSearch":"hug"}}}},"responses":{"200":{"description":"Successfully retrieved user uploads","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UploadFile"}}}}},"401":{"description":"Unauthorized - Invalid or missing access token"},"500":{"description":"Internal server error"}},"tags":["User Commands"]}},"/api/user/settings":{"post":{"summary":"Retrieve user settings","description":"Fetches all settings for the authenticated user","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Empty object for POST request"}}}},"responses":{"200":{"description":"Successfully retrieved user settings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettingsResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing access token"},"500":{"description":"Internal server error"}},"tags":["User Commands"]}}},"components":{"schemas":{"DatabaseStatusResponse":{"type":"object","properties":{"message":{"type":"string","description":"Description of database connection states","example":"0: disconnected, 1: connected, 2: connecting, 3: disconnecting, 4: invalid credentials"},"status":{"type":"integer","description":"Current database connection status (0-4)","example":1,"enum":[0,1,2,3,4]}}},"MemoryInfo":{"type":"object","properties":{"rss":{"type":"number","description":"Resident Set Size - total memory allocated for the process"},"heapTotal":{"type":"number","description":"Total heap memory allocated"},"heapUsed":{"type":"number","description":"Heap memory currently in use"},"external":{"type":"number","description":"Memory used by C++ objects bound to JavaScript objects"},"arrayBuffers":{"type":"number","description":"Memory allocated for ArrayBuffers and SharedArrayBuffers"}}},"Dependencies":{"type":"object","properties":{"database":{"type":"number","description":"Database connection status (1 = connected)"}}},"HealthResponse":{"type":"object","properties":{"status":{"type":"string","description":"Overall health status","example":"ok"},"uptime":{"type":"number","description":"Server uptime in seconds"},"timestamp":{"type":"number","description":"Current timestamp in milliseconds"},"memory":{"$ref":"#/components/schemas/MemoryInfo"},"dependencies":{"$ref":"#/components/schemas/Dependencies"}}},"TestUrlRequest":{"type":"object","required":["url"],"properties":{"url":{"type":"string","format":"uri","description":"The URL to be tested","example":"https://domain.edu/7891273"}}},"TestUrlResponse":{"type":"object","properties":{"ltiassigned":{"type":"boolean","description":"Indicates if LTI is assigned","example":true},"name":{"type":"string","description":"Generated name identifier","example":"29167765.hugo770126995."},"status":{"type":"string","description":"Current status of the test","example":"active"},"ainame":{"type":"string","description":"AI name associated with the test","example":""},"picture":{"type":"string","description":"Picture URL or identifier","example":""},"publicId":{"type":"string","format":"uuid","description":"Public identifier for the test","example":"bc6efd03-9d01-43e7-bd49-c4af1c54ae3a"}}},"SignInRequest":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","example":"john.doe@mydomain.com"},"password":{"type":"string","format":"password","example":"iLovePria123"}}},"SignInResponse":{"type":"object","properties":{"token":{"type":"string","description":"JWT authentication token"},"profile":{"$ref":"#/components/schemas/UserProfile"}}},"AutoSignupRequest":{"type":"object","required":["email","fname","lxp_user_id","lxp_user_type","lxp_partner_id","lxp_partner_name","lxp_role_id","lxp_role_name","institution_id","institution_url","client_ip","lticontextid","digitaltwin"],"properties":{"email":{"type":"string","format":"email","example":"hugo770126995@praxis-ai.com"},"fname":{"type":"string","example":"hugo770126995 WebUser"},"picture":{"type":"string","example":""},"lxp_user_id":{"type":"string","example":"1750665682"},"lxp_user_type":{"type":"integer","example":4},"lxp_partner_id":{"type":"string","example":"1"},"lxp_partner_name":{"type":"string","example":"WebPria"},"lxp_role_id":{"type":"integer","example":123},"lxp_role_name":{"type":"string","example":"Hugo Course"},"institution_id":{"type":"string","format":"uuid","example":"bc6efd03-9d01-43e7-bd49-c4af1c54ae3a"},"institution_url":{"type":"string","example":"file:///C:/_svn/_praxis/code/pria_ui/pria-ui-v22/pria-ui-v22/public/test_sdk.html"},"client_ip":{"type":"string","example":"::1"},"lticontextid":{"type":"string","example":"https://domain.edu/7891273"},"digitaltwin":{"type":"boolean","example":true}}},"Institution":{"type":"object","properties":{"_id":{"type":"string"},"name":{"type":"string"},"picture":{"type":"string"},"picture_bg":{"type":"string"},"credits":{"type":"integer"},"status":{"type":"string"},"allowJoining":{"type":"string"},"joiningAdminOnly":{"type":"boolean"},"publicId":{"type":"string","format":"uuid"},"publicAuthorizedUrls":{"type":"array","items":{"type":"string"}},"ainame":{"type":"string"},"contactEmail":{"type":"string","format":"email"},"creditAward":{"type":"integer"},"poolCredits":{"type":"boolean"},"invoices_urls":{"type":"array","items":{"type":"string"}},"maxCompletionTokens":{"type":"integer"},"disableFileUploadForUser":{"type":"boolean"},"toolsDisabled":{"type":"array","items":{"type":"string"}},"ltiContextIds":{"type":"array","items":{"type":"string"}},"personalisationAsked":{"type":"boolean"},"locationEnabled":{"type":"boolean"},"rtEnabled":{"type":"boolean"},"rtAdminOnly":{"type":"boolean"},"displayAgentDetails":{"type":"boolean"},"assistantsDisabled":{"type":"array","items":{"type":"string"}},"disableAssistantsForUser":{"type":"boolean"},"rtVoice":{"type":"string"},"maxFiles":{"type":"integer"},"questionType":{"type":"string"},"creditsTotal":{"type":"integer","nullable":true},"creditsUsagePct":{"type":"number"},"id":{"type":"string"}}},"UserProfile":{"type":"object","properties":{"_id":{"type":"string"},"email":{"type":"string","format":"email"},"fname":{"type":"string"},"lname":{"type":"string"},"picture":{"type":"string"},"accountType":{"type":"string"},"permissions":{"type":"array","items":{"type":"string"}},"customerId":{"type":"string"},"lxp_user_id":{"type":"string"},"lxp_user_type":{"type":"integer"},"lxp_partner_id":{"type":"string"},"lxp_partner_name":{"type":"string"},"lxp_role_id":{"type":"integer"},"lxp_role_name":{"type":"string"},"credits":{"type":"integer"},"creditsUsed":{"type":"integer"},"plan":{"type":"string"},"status":{"type":"string"},"trial_end":{"type":"string","format":"date-time"},"trial_used":{"type":"boolean"},"current_period_end":{"type":"string","format":"date-time"},"cancel_at_period_end":{"type":"boolean"},"referralId":{"type":"string","format":"uuid"},"referrerPaid":{"type":"boolean"},"resetCodeId":{"type":"string","format":"uuid"},"invoices_urls":{"type":"array","items":{"type":"string"}},"remember_history_count":{"type":"integer"},"browser_voice":{"type":"string"},"rt_voice":{"type":"string"},"use_location":{"type":"boolean"},"pin_ui":{"type":"boolean"},"dark_mode":{"type":"boolean"},"max_dialogues":{"type":"integer"},"created":{"type":"string","format":"date-time"},"__v":{"type":"integer"},"institution":{"$ref":"#/components/schemas/Institution"}}},"AutoSignupResponse":{"type":"object","properties":{"token":{"type":"string","description":"JWT authentication token"},"profile":{"$ref":"#/components/schemas/UserProfile"}}},"GPSCoordinates":{"type":"object","properties":{"accuracy":{"type":"number","description":"GPS accuracy in meters"},"latitude":{"type":"number","description":"Latitude coordinate"},"longitude":{"type":"number","description":"Longitude coordinate"},"altitude":{"type":"number","nullable":true,"description":"Altitude in meters"},"altitudeAccuracy":{"type":"number","nullable":true,"description":"Altitude accuracy in meters"},"heading":{"type":"number","nullable":true,"description":"Heading direction in degrees"},"speed":{"type":"number","nullable":true,"description":"Speed in meters per second"}}},"AssistantInfo":{"type":"object","properties":{"_id":{"type":"string","description":"Assistant unique identifier"},"name":{"type":"string","description":"Assistant name"},"picture_url":{"type":"string","description":"Assistant profile picture URL"}}},"SelectedCourse":{"type":"object","properties":{"course_id":{"type":"number","description":"Course unique identifier"},"course_name":{"type":"string","description":"Course display name"},"assistant":{"$ref":"#/components/schemas/AssistantInfo"},"history_count":{"type":"number","description":"Number of messages in conversation history"},"last_dialogue_date":{"type":"string","format":"date-time","description":"Last conversation timestamp"}}},"RequestArgs":{"type":"object","properties":{"userISODate":{"type":"string","format":"date-time","description":"User's current timestamp in ISO format"},"userTimezone":{"type":"string","description":"User's timezone"},"userGPSCoordinates":{"$ref":"#/components/schemas/GPSCoordinates"},"socketId":{"type":"string","description":"WebSocket connection identifier"},"selectedCourse":{"$ref":"#/components/schemas/SelectedCourse"},"ragOnly":{"type":"boolean","description":"Whether to use only RAG search results"}}},"QandARequest":{"type":"object","required":["id","requestArgs","inputs","outputs"],"properties":{"id":{"type":"number","description":"Request unique identifier"},"requestArgs":{"$ref":"#/components/schemas/RequestArgs"},"inputs":{"type":"array","items":{"type":"string"},"description":"Array of user input messages"},"outputs":{"type":"array","items":{"type":"string"},"description":"Array of AI response messages"}}},"QandAResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"Whether the request was successful"},"streamingFailed":{"type":"boolean","description":"Whether streaming response failed"},"outputs":{"type":"array","items":{"type":"string"},"description":"AI generated responses"},"usage":{"type":"number","description":"Total tokens used"},"credits":{"type":"number","description":"Credits consumed for this request"},"creditsUsed":{"type":"number","description":"Total credits used by user"},"totalLength":{"type":"number","description":"Total response length"},"totalCredits":{"type":"number","description":"Total credits available"},"query_duration_ms":{"type":"number","description":"Query processing time in milliseconds"},"requestArgs":{"$ref":"#/components/schemas/RequestArgs"},"model":{"type":"string","description":"AI model used for processing"}}},"RefreshProfileResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"Whether the operation was successful"},"profile":{"$ref":"#/components/schemas/UserProfile"}}},"EntitlementData":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier for the entitlement record"},"entitlements":{"type":"array","items":{"type":"string"},"description":"Array of permission strings (e.g., \"institutions.list\", \"users.add\")"},"accountType":{"type":"string","enum":["super","admin","user"],"description":"Type of account (super, admin, or user)"},"status":{"type":"string","enum":["active","inactive"],"description":"Current status of the entitlement"},"creditAwarded":{"type":"number","description":"Number of credits awarded to the user"},"user":{"type":"string","description":"User ID associated with this entitlement"},"created":{"type":"string","format":"date-time","description":"Creation timestamp"},"lastLogin":{"type":"string","format":"date-time","description":"Last login timestamp"},"lastKA":{"type":"string","format":"date-time","description":"Last keep-alive timestamp"},"digitaltwin":{"type":"boolean","description":"Whether digital twin is enabled"},"institution":{"type":"string","description":"Institution ID (optional)"},"institution_data":{"type":"object","description":"Detailed institution information (when available)"},"account_data":{"type":"object","description":"Detailed account information (when available)"}}},"RefreshEntitlementsResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the operation was successful"},"entitlements":{"type":"array","items":{"$ref":"#/components/schemas/EntitlementData"},"description":"Array of user entitlement records with associated data"}}},"HistoryQuery":{"type":"object","properties":{"api":{"type":"string","description":"API endpoint filter","example":"/ai/personal/qanda"},"forgotten":{"type":"object","properties":{"$ne":{"type":"boolean"}},"description":"MongoDB query to exclude forgotten records","example":{"$ne":true}},"limit":{"type":"integer","description":"Maximum number of records to return","example":5},"course_id":{"type":"number","description":"Course identifier to filter by","example":1750532703472}}},"HistoryRecord":{"type":"object","properties":{"in":{"type":"object","properties":{"input":{"type":"string","description":"User input text"}}},"out":{"type":"object","properties":{"outputs":{"type":"array","items":{"type":"string"},"description":"AI response outputs"}}},"id":{"type":"string","description":"Unique identifier for the history record"},"created":{"type":"string","format":"date-time","description":"Creation timestamp"},"credits":{"type":"integer","description":"Credits consumed for this interaction"},"usage":{"type":"integer","description":"Token usage count"},"cached":{"type":"integer","description":"Cached tokens used"},"completion":{"type":"integer","description":"Completion tokens generated"},"latencyMs":{"type":"integer","description":"Response latency in milliseconds"},"favorite":{"type":"boolean","description":"Whether record is marked as favorite"},"forgotten":{"type":"boolean","description":"Whether record is marked as forgotten"},"course_id":{"type":"number","description":"Associated course identifier"},"course_name":{"type":"string","description":"Associated course name"},"query_duration_ms":{"type":"integer","description":"Query processing duration in milliseconds"},"tools":{"type":"array","items":{"type":"object"},"description":"Tools used during the interaction"},"conversation_model":{"type":"string","description":"AI model used for the conversation"},"success":{"type":"boolean","description":"Whether the interaction was successful"}}},"HistoriesResponse":{"type":"array","items":{"$ref":"#/components/schemas/HistoryRecord"},"description":"Array of conversation history records"},"FavoriteConversation":{"type":"object","properties":{"in":{"type":"object","properties":{"input":{"type":"string","description":"User input/query"}}},"out":{"type":"object","properties":{"outputs":{"type":"array","items":{"type":"string"},"description":"AI assistant responses"}}},"id":{"type":"string","description":"Unique conversation identifier"},"created":{"type":"string","format":"date-time","description":"Conversation creation timestamp"},"credits":{"type":"integer","description":"Credits consumed for this conversation"},"usage":{"type":"integer","description":"Token usage count"},"cached":{"type":"integer","description":"Cached tokens used"},"completion":{"type":"integer","description":"Completion tokens generated"},"latencyMs":{"type":"integer","description":"Response latency in milliseconds"},"favorite":{"type":"boolean","description":"Whether conversation is marked as favorite"},"forgotten":{"type":"boolean","description":"Whether conversation is marked as forgotten"},"course_id":{"type":"integer","description":"Associated course identifier"},"course_name":{"type":"string","description":"Name of associated course"},"query_duration_ms":{"type":"integer","description":"Total query processing duration in milliseconds"},"success":{"type":"boolean","description":"Whether the conversation was successful"},"assistant":{"type":"object","properties":{"_id":{"type":"string","description":"Assistant unique identifier"},"name":{"type":"string","description":"Assistant name"},"liked_count":{"type":"integer","description":"Number of likes for this assistant"},"picture_url":{"type":"string","description":"Assistant avatar image URL"}}},"tools":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"Tool execution identifier"},"name":{"type":"string","description":"Tool name used"},"arguments":{"type":"object","description":"Arguments passed to the tool"},"response":{"type":"string","description":"Tool response"},"responseLength":{"type":"integer","description":"Length of tool response"},"success":{"type":"boolean","description":"Whether tool execution was successful"},"_id":{"type":"string","description":"Tool execution record identifier"}}}},"conversation_model":{"type":"string","description":"AI model used for the conversation"}}},"FavoritesResponse":{"type":"array","items":{"$ref":"#/components/schemas/FavoriteConversation"}},"Assistant":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier for the assistant"},"name":{"type":"string","description":"Name of the assistant"},"picture_url":{"type":"string","description":"URL to the assistant's picture"}}},"Course":{"type":"object","properties":{"course_id":{"type":"integer","description":"Unique identifier for the course"},"course_name":{"type":"string","description":"Name of the course"},"assistant":{"$ref":"#/components/schemas/Assistant","description":"Assistant associated with the course (optional)"},"history_count":{"type":"integer","description":"Number of dialogue entries in the course history"},"last_dialogue_date":{"type":"string","format":"date-time","description":"ISO timestamp of the last dialogue in the course"}}},"UploadFile":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier for the file"},"filename":{"type":"string","description":"System-generated filename"},"originalname":{"type":"string","description":"Original filename as uploaded"},"mimetype":{"type":"string","description":"MIME type of the file"},"created":{"type":"string","format":"date-time","description":"File creation timestamp"},"filesize":{"type":"integer","description":"File size in bytes"},"status":{"type":"string","enum":["active","selected","deleted"],"description":"Current status of the file"},"thumbnail":{"type":"string","description":"Thumbnail picture encoded"},"user":{"type":"string","description":"User ID who owns the file"},"file_summary":{"type":"string","description":"AI-generated summary of file content"},"file_title":{"type":"string","description":"AI-generated title for the file"},"file_url":{"type":"string","format":"uri","description":"URL to access the file"},"tokens_used":{"type":"integer","description":"Number of tokens used for processing"},"is_private":{"type":"boolean","description":"Whether the file is private"},"file_dimensions":{"type":"string","description":"Image dimensions (for image files)"},"file_authors":{"type":"string","description":"Authors of the content"},"owner_data":{"type":"object","properties":{"email":{"type":"string","format":"email"},"fname":{"type":"string"},"lname":{"type":"string"}}},"index":{"type":"integer","description":"Index position in the list"}}},"UploadSearchRequest":{"type":"object","properties":{"lean":{"type":"boolean","description":"Return minimal data structure"},"status":{"type":"object","properties":{"$ne":{"type":"string","description":"MongoDB not-equal operator"}}},"fileNameSearch":{"type":"string","description":"Search term for filename filtering"}}},"UserSetting":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier for the setting"},"key":{"type":"string","description":"Setting key name"},"value":{"type":"string","description":"Setting value"},"institution":{"type":"string","description":"Institution ID"},"user":{"type":"string","description":"User ID"},"status":{"type":"string","description":"Setting status"},"admin_only":{"type":"boolean","description":"Whether setting is admin only"},"institution_shared":{"type":"boolean","description":"Whether setting is shared with institution"},"editable_others":{"type":"boolean","description":"Whether setting can be edited by others"},"institution_data":{"type":"object","properties":{"_id":{"type":"string"},"name":{"type":"string"},"ainame":{"type":"string"}}},"user_data":{"type":"object","properties":{"_id":{"type":"string"},"email":{"type":"string"},"fname":{"type":"string"},"lname":{"type":"string"}}},"index":{"type":"integer","description":"Setting index order"}}},"UserSettingsResponse":{"type":"array","items":{"$ref":"#/components/schemas/UserSetting"}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT token passed in x-access-token header"}}},"tags":[]}
