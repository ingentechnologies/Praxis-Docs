---
title: "Pria JavaScript SDK"
description: "The Pria JavaScript SDK allows you to integrate AI digital twin capabilities directly into your website or Learning Management System (LMS) like Canvas. This guide covers both embedded integration and programmatic API usage."
---

## Integration Methods

There are two primary ways to integrate Pria into your application:

<CardGroup cols={2}>
  <Card title="Embed Integration" icon="code" href="#embed-integration">
    Install Pria directly on your website with customizable UI options
  </Card>
  <Card title="JavaScript API" icon="terminal" href="#javascript-api">
    Programmatically interact with Pria without the default UI
  </Card>
</CardGroup>

## Embed Integration

### Installation

Install Pria on your website using the custom SDK:

```html
<script src="https://pria.praxislxp.com/pria-sdk-web.js"></script>
```

<Note>
  For Canvas LMS integration, follow the [Pria Custom Theme Canvas Install Guide](https://docs.praxis-ai.com/integrations/canvas/theme)
</Note>

### Configuration Options

Configure Pria's display behavior using the `displayOptions` object:

```javascript
var displayOptions = {
    fullScreen: false,              // Expand in full screen mode
    openOnLoad: false,              // Open Pria immediately when loaded
    buttonWidth: '80px',            // Size of the Pria logo button
    buttonPosition: 'fixed',        // Button position type (fixed, relative, sticky)
    buttonPositionRight: '20px',    // Distance from right edge
    buttonPositionBottom: '20px',   // Distance from bottom edge
    buttonNoBounce: true,           // Disable button bounce animation
    priaContainerId: '',            // Container ID for Pria window (default: BODY)
    buttonContainerId: '',          // Container ID for button (default: BODY)
    allowPop: false,                // Allow popping out of containing iframe
    noUI: false                     // Disable UI for headless operation
}
```

<Tip>
  Set `noUI: true` to use Pria programmatically without the visual interface
</Tip>

### SDK Playground

Test your integration using the [SDK Playground](https://pria.praxislxp.com/test_sdk.html).

## JavaScript API

### Global Window Object

Once loaded, Pria is available as a global window object with the following methods:

```javascript
const pria = {
    load: priasdk,              // Initialize Pria SDK
    send: priaSend,             // Send requests to Pria
    subscribe: priaSubscribe,   // Subscribe to responses
    unsubscribe: priaUnsubscribe, // Unsubscribe from responses
    setVisible: priaSetVisible, // Control UI visibility
    version: 1                  // SDK version
}
```

### Available Commands

| Command           | Description                         | Parameters       |
| ----------------- | ----------------------------------- | ---------------- |
| `post.message`    | Send text message to Pria           | Array of strings |
| `convo.start`     | Start speech-to-speech conversation | None             |
| `convo.stop`      | Stop speech-to-speech conversation  | None             |
| `assistants.list` | Get available assistants            | None             |

## Sending Requests

### Basic Message Request

Send a text message to your digital twin:

```javascript
const request = {
    command: 'post.message',
    inputs: ['How are you?', 'Today is my birthday!']
}

pria.send(request)
```

### Conversation Mode

Start speech-to-speech conversation:

```javascript
const request = {
    command: 'convo.start'
}

pria.send(request)
```

Stop conversation mode:

```javascript
const request = {
    command: 'convo.stop'
}

pria.send(request)
```

### Error Handling

The `pria.send()` function may throw these errors:

<Warning>
  - "Connect Pria first, then retry" - Pria is not properly initialized
  - "Function requires valid JSON" - Invalid request format
</Warning>

## Receiving Responses

### Subscribe to Responses

To receive responses from Pria, you must first subscribe:

```javascript
const handlePriaResponse = (response) => {
    console.log('Received from Pria:', response)
    // Process the response here
}

pria.subscribe(handlePriaResponse)
```

### Response Format

All responses follow this structure:

```json
{
    "type": "pria-response",
    "response": {
        "command": "post.message",
        "content": {
            "success": true,
            "outputs": ["Response text here"],
            "usage": 12048,
            "query_duration_ms": 9404,
            "model": "us.anthropic.claude-3-5-sonnet-20240620-v1:0"
        },
        "isError": false,
        "type": "object"
    },
    "version": 1
}
```

### Response Examples

<Tabs>
  <Tab title="Successful Message">
    ```json
    {
        "type": "pria-response",
        "response": {
            "command": "post.message",
            "content": {
                "success": true,
                "outputs": ["I am doing great! Happy birthday by the way.."],
                "usage": 12048,
                "query_duration_ms": 9404,
                "model": "us.anthropic.claude-3-5-sonnet-20240620-v1:0"
            },
            "isError": false,
            "type": "object"
        },
        "version": 1
    }
    ```
  </Tab>
  <Tab title="Error Response">
    ```json
    {
        "type": "pria-response",
        "response": {
            "content": "Unauthorized",
            "command": "convo.start",
            "type": "string",
            "isError": true
        },
        "version": 1
    }
    ```
  </Tab>
  <Tab title="Conversation Control">
    ```json
    {
        "type": "pria-response",
        "response": {
            "content": "Convo stopped (STS)",
            "command": "convo.stop",
            "type": "string",
            "isError": false
        },
        "version": 1
    }
    ```
  </Tab>
</Tabs>

## Authentication & Security

<Info>
  The SDK uses the identity of the user currently connected to the digital twin. Ensure proper authentication is in place before making requests.
</Info>

### Requirements

- Pria must be properly configured and fully connected
- User must be authenticated with appropriate permissions
- Valid session must be established

## Content Format

<Note>
  Pria outputs content in [Markdown format](https://en.wikipedia.org/wiki/Markdown). Parse responses accordingly in your application.
</Note>

## Usage Metrics

The `usage` property in responses indicates the total number of tokens consumed (input \+ output) for billing and monitoring purposes.

## Best Practices

### Error Handling

```javascript
const sendMessage = async (message) => {
    try {
        const request = {
            command: 'post.message',
            inputs: [message]
        }
        
        pria.send(request)
    } catch (error) {
        console.error('Failed to send message:', error)
        // Handle error appropriately
    }
}
```

### Response Processing

```javascript
const handleResponse = (response) => {
    if (response.response.isError) {
        console.error('Pria error:', response.response.content)
        return
    }
    
    // Process successful response
    const outputs = response.response.content.outputs
    outputs.forEach(output => {
        // Display or process each output
        console.log(output)
    })
}
```

### Cleanup

```javascript
// Unsubscribe when component unmounts or page unloads
window.addEventListener('beforeunload', () => {
    pria.unsubscribe(handleResponse)
})
```

## Troubleshooting

### Common Issues

| Issue                      | Solution                                   |
| -------------------------- | ------------------------------------------ |
| "Connect Pria first" error | Ensure SDK is loaded and initialized       |
| No responses received      | Check if you've subscribed to responses    |
| Unauthorized errors        | Verify user authentication and permissions |
| Invalid JSON errors        | Validate request format and structure      |

### Debug Mode

Enable debug logging to troubleshoot integration issues:

```javascript
// Add to your configuration
var displayOptions = {
    // ... other options
    debug: true  // Enable debug logging
}
```